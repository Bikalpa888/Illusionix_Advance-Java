<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Virtual Showroom - Illusionix</title>
    <link rel="stylesheet" th:href="@{/main.css}" />

    <meta name="description" content="Experience VR/AR products in immersive virtual environments - Gaming setups, professional workspaces, and family entertainment spaces" />
    <script type="module" src="https://static.rocket.new/rocket-web.js?_cfg=https%3A%2F%2Fvrcommerc3603back.builtwithrocket.new&_be=https%3A%2F%2Fapplication.rocket.new&_v=0.1.8"></script>
    <!-- AR/VR libs -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
</head>
<body class="bg-background text-text-primary">
<!-- Live Chat Widget -->
<div id="live-chat-widget" class="fixed bottom-4 right-4 z-50">
    <button id="chat-toggle" class="bg-accent hover:bg-accent-600 text-white rounded-full p-4 shadow-lg transition-all duration-300">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
    </button>

    <!-- Chat Window -->
    <div id="chat-window" class="absolute bottom-16 right-0 w-80 h-96 bg-white rounded-lg shadow-xl border border-primary-200 transform scale-0 transition-transform duration-300 origin-bottom-right">
        <div class="bg-accent text-white p-4 rounded-t-lg flex justify-between items-center">
            <h3 class="font-semibold">Live Support</h3>
            <button id="chat-close" class="text-white hover:text-accent-200">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                </svg>
            </button>
        </div>
        <div id="chat-messages" class="p-4 h-64 overflow-y-auto">
            <div class="mb-3">
                <div class="bg-primary-50 p-3 rounded-lg max-w-xs">
                    <p class="text-sm">Hello! How can I help you today?</p>
                    <span class="text-xs text-text-secondary">Support Agent • Online</span>
                </div>
            </div>
        </div>
        <div class="p-4 border-t border-primary-200">
            <div class="flex space-x-2">
                <input type="text" id="chat-input" placeholder="Type your message..." class="flex-1 input-field text-sm py-2" />
                <button id="chat-send" class="btn-accent px-4 py-2 text-sm">Send</button>
            </div>
        </div>
    </div>
</div>

<!-- Navigation Header -->
<header class="bg-surface/80 backdrop-blur-md border-b border-primary-200 sticky top-0 z-50">
    <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-16">
            <!-- Logo -->
            <a href="homepage" class="flex items-center" th:href="@{/homepage}">
                <svg class="w-10 h-10 text-secondary" viewBox="0 0 40 40" fill="currentColor">
                    <path d="M20 4L36 12v16L20 36L4 28V12L20 4z"/>
                    <circle cx="20" cy="20" r="8" fill="white"/>
                    <circle cx="20" cy="20" r="4" fill="currentColor"/>
                </svg>
                <span class="ml-3 text-xl font-bold text-primary">Illusionix</span>
            </a>

            <!-- Desktop Navigation -->
            <div class="hidden md:flex items-center space-x-8">
                <a href="homepage" class="text-text-secondary hover:text-secondary transition-colors">Home</a>
                <a href="product_categories" class="text-text-secondary hover:text-secondary transition-colors">Products</a>
                <a href="virtual_showroom" class="text-secondary font-semibold">Virtual Showroom</a>
                <a href="user_dashboard" class="text-text-secondary hover:text-secondary transition-colors">Dashboard</a>
                <a href="aboutus" class="text-text-secondary hover:text-secondary transition-colors">About</a>
                <a href="contact" class="text-text-secondary hover:text-secondary transition-colors">Contact</a>

                <!-- Search Bar -->
                <div class="relative">
                    <button id="search-toggle" class="text-text-secondary hover:text-secondary transition-colors p-2">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </button>
                    <div id="search-expanded" class="absolute right-0 top-full mt-2 transform scale-0 transition-transform duration-300 origin-top-right">
                        <div class="relative">
                            <input type="text" id="search-input" placeholder="Search products..." class="input-field pl-10 pr-4 py-2 w-64 bg-white shadow-lg border border-primary-200" />
                            <svg class="w-5 h-5 text-text-secondary absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>

                            <!-- Search Results Dropdown -->
                            <div id="search-results" class="absolute top-full left-0 right-0 bg-white shadow-lg rounded-lg mt-2 border border-primary-200 hidden max-h-64 overflow-y-auto">
                                <!-- Search results will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>


                <div class="flex items-center space-x-4">
                    <button class="theme-toggle text-text-secondary hover:text-secondary" aria-pressed="false" title="Switch theme">
                        <svg data-icon="moon" class="w-6 h-6 theme-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 118.646 3.646 7 7 0 0020.354 15.354z"/></svg>
                        <svg data-icon="sun" class="w-6 h-6 theme-icon hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v2m0 14v2m9-9h-2M5 12H3m15.364 6.364l-1.414-1.414M7.05 7.05 5.636 5.636m12.728 0-1.414 1.414M7.05 16.95l-1.414 1.414M12 8a4 4 0 100 8 4 4 0 000-8z"/></svg>
                    </button>
                    <a href="/shopping_cart_checkout" th:href="@{/shopping_cart_checkout}" class="relative text-text-secondary hover:text-secondary">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m6-5v6a2 2 0 01-2 2H9a2 2 0 01-2-2v-6m8 0V9a2 2 0 00-2-2H9a2 2 0 00-2 2v4.01"/>
                        </svg>
                        <span id="cart-count" class="absolute -top-2 -right-2 bg-accent text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">3</span>
                    </a>

                    <!-- Login and Signup Buttons -->
                <div class="flex items-center space-x-2 ml-4" th:if="${!loggedIn}">
                    <a href="login" class="btn-secondary text-sm px-4 py-2">Login</a>
                    <a href="signup" class="btn-accent text-sm px-4 py-2">Sign Up</a>
                </div>
                <div class="flex items-center space-x-2 ml-4" th:if="${loggedIn}">
                    <span class="text-sm text-text-secondary">Hi, <span class="text-primary font-semibold" th:text="${currentUserName}">User</span></span>
                    <a href="logout" class="btn-secondary text-sm px-4 py-2">Logout</a>
                </div>
                </div>
            </div>

            <!-- Mobile Menu Button -->
            <button id="mobile-menu-btn" class="md:hidden text-text-secondary">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
                </svg>
            </button>
        </div>

        <!-- Mobile Menu -->
        <div id="mobile-menu" class="md:hidden hidden py-4 border-t border-primary-200">
            <div class="flex flex-col space-y-4">
                <div class="relative mb-4">
                    <input type="text" placeholder="Search products..." class="input-field pl-10 pr-4 py-2 w-full" />
                    <svg class="w-5 h-5 text-text-secondary absolute left-3 top-1/2 transform -translate-y-1/2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                </div>
                <a href="homepage" class="text-text-secondary">Home</a>
                <a href="product_categories" class="text-text-secondary">Products</a>
                <a href="virtual_showroom" class="text-secondary font-semibold">Virtual Showroom</a>
                <a href="user_dashboard" class="text-text-secondary">Dashboard</a>
                <a href="aboutus" class="text-text-secondary">About</a>
                <a href="contact" class="text-text-secondary">Contact</a>

                <!-- Mobile Login and Signup Buttons -->
                <div class="flex flex-col space-y-2 pt-4 border-t border-primary-200" th:if="${!loggedIn}">
                    <a href="login" class="btn-secondary text-center">Login</a>
                    <a href="signup" class="btn-accent text-center">Sign Up</a>
                </div>
                <div class="flex flex-col space-y-2 pt-4 border-t border-primary-200" th:if="${loggedIn}">
                    <div class="text-sm text-text-secondary">Signed in as <span class="text-primary font-semibold" th:text="${currentUserName}">User</span></div>
                    <a href="logout" class="btn-secondary text-center">Logout</a>
                </div>
            </div>
        </div>
    </nav>
</header>

<!-- Hero Section -->
<section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-primary-900 via-primary-800 to-secondary-900">
    <!-- Animated Background Elements -->
    <div class="absolute inset-0 opacity-20">
        <div class="absolute top-20 left-10 w-32 h-32 bg-accent rounded-full blur-3xl animate-pulse"></div>
        <div class="absolute bottom-20 right-10 w-40 h-40 bg-secondary rounded-full blur-3xl animate-pulse delay-1000"></div>
        <div class="absolute top-1/2 left-1/3 w-24 h-24 bg-accent-400 rounded-full blur-2xl animate-pulse delay-500"></div>
    </div>

    <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <div class="mb-8">
            <div class="inline-flex items-center bg-accent/20 text-accent px-4 py-2 rounded-full text-sm font-semibold mb-6">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                </svg>
                WebXR Powered Experience
            </div>
            <h1 class="text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight">
                Step Into Your <span class="text-gradient">Virtual Showroom</span>
            </h1>
            <p class="text-xl text-primary-200 mb-8 leading-relaxed max-w-3xl mx-auto">
                Explore VR/AR products in realistic environments. Experience gaming setups, professional workspaces, and family entertainment spaces before you buy.
            </p>

            <!-- Primary CTAs -->
            <div class="flex flex-col sm:flex-row gap-4 justify-center mb-6">
                <button class="btn-accent text-center" onclick="startVirtualTour()">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                    </svg>
                    Start Virtual Tour
                </button>
                <button class="btn-secondary text-center" onclick="bookConsultation()">
                    Schedule Expert Consultation
                </button>
            </div>

            <!-- Device Compatibility Notice -->
            <div class="text-accent-200 text-sm">
                <svg class="w-4 h-4 inline mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                Works on all devices - VR/AR enhanced experience available
            </div>
        </div>
    </div>
</section>

<!-- Quick AR Try-On -->
<section class="py-16 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-8">
            <h2 class="text-3xl font-bold text-primary">Try Products in AR</h2>
            <p class="text-text-secondary">Place life-size 3D models in your space</p>
        </div>
        <div class="grid gap-8 md:grid-cols-3">
            <div class="bg-surface rounded-2xl border border-primary-200 p-4">
                <model-viewer src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" ios-src="https://modelviewer.dev/shared-assets/models/Astronaut.usdz" ar ar-modes="webxr scene-viewer quick-look" camera-controls shadow-intensity="0.8" crossorigin="anonymous" loading="eager" style="width:100%;height:300px;border-radius:1rem;background:rgba(0,0,0,0.05)" poster="https://modelviewer.dev/shared-assets/models/thumbnails/Astronaut.webp"></model-viewer>
                <div class="mt-4 flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold">Astronaut</h3>
                        <p class="text-sm text-text-secondary">Scale 1:1 • 3D/AR</p>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn-accent" data-activate-ar>AR</button>
                        <button class="btn-secondary" data-add-to-cart data-id="astro-1" data-name="Astronaut Model" data-price="49">Add</button>
                    </div>
                </div>
            </div>
            <div class="bg-surface rounded-2xl border border-primary-200 p-4">
                <model-viewer
                        src="https://raw.githubusercontent.com/KhronosGroup/glTF-Sample-Models/master/2.0/SheenChair/glTF-Binary/SheenChair.glb"
                        ar ar-modes="webxr scene-viewer"
                        camera-controls auto-rotate crossorigin="anonymous" loading="eager" environment-image="neutral"
                        style="width:100%;height:300px;border-radius:1rem;background:rgba(0,0,0,0.05)"
                        poster="https://images.unsplash.com/photo-1555041469-a586c61ea9bc?q=80&auto=format&fit=crop&w=1200"
                ></model-viewer>
                <div class="mt-4 flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold">Sheen Lounge Chair</h3>
                        <p class="text-sm text-text-secondary">Home preview • 3D/AR</p>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn-accent" data-activate-ar>AR</button>
                        <button class="btn-secondary" data-add-to-cart data-id="sheenchair-1" data-name="Sheen Lounge Chair" data-price="199">Add</button>
                    </div>
                </div>
            </div>
            <div class="bg-surface rounded-2xl border border-primary-200 p-4">
                <model-viewer src="https://modelviewer.dev/shared-assets/models/RobotExpressive.glb" ios-src="https://modelviewer.dev/shared-assets/models/RobotExpressive.usdz" ar ar-modes="webxr scene-viewer quick-look" camera-controls crossorigin="anonymous" loading="eager" style="width:100%;height:300px;border-radius:1rem;background:rgba(0,0,0,0.05)" poster="https://modelviewer.dev/shared-assets/models/thumbnails/RobotExpressive.webp"></model-viewer>
                <div class="mt-4 flex items-center justify-between">
                    <div>
                        <h3 class="font-semibold">Expressive Robot</h3>
                        <p class="text-sm text-text-secondary">Animated • 3D/AR</p>
                    </div>
                    <div class="flex gap-2">
                        <button class="btn-accent" data-activate-ar>AR</button>
                        <button class="btn-secondary" data-add-to-cart data-id="robot-1" data-name="Expressive Robot" data-price="129">Add</button>
                    </div>
                </div>
            </div>
        </div>
        <p class="text-xs text-text-secondary mt-3">AR requires a compatible device and browser.</p>
    </div>
</section>

<!-- VR Preview -->
<section class="py-16 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex items-center justify-between mb-4">
            <h2 class="text-3xl font-bold text-primary">Step Into VR</h2>
            <p class="text-text-secondary">Enter VR on supported browsers/headsets</p>
        </div>
        <div class="bg-surface border border-primary-200 rounded-2xl p-4" id="vr-preview-wrap">
            <div class="rounded-xl overflow-hidden" style="height: 60vh; min-height: 360px;">
                <a-scene id="vr-preview-scene" renderer="colorManagement: true;" embedded>
                    <a-assets>
                        <img id="sky" src="https://cdn.aframe.io/360-image-gallery-boilerplate/img/sechelt.jpg" crossorigin="anonymous" />
                        <a-asset-item id="astronaut" src="https://modelviewer.dev/shared-assets/models/Astronaut.glb" crossorigin="anonymous"></a-asset-item>
                    </a-assets>
                    <a-sky src="#sky"></a-sky>
                    <a-entity position="0 1.6 0">
                        <a-camera wasd-controls-enabled="true"></a-camera>
                    </a-entity>
                    <a-entity light="type: ambient; intensity: 0.6"></a-entity>
                    <a-entity light="type: directional; intensity: 0.8" position="1 3 2"></a-entity>
                    <a-entity gltf-model="#astronaut" position="0 1.2 -2" rotation="0 30 0" scale="0.8 0.8 0.8"></a-entity>
                </a-scene>
            </div>
            <div class="mt-3 flex items-center justify-end">
                <a href="vr_experience.html" class="btn-accent">Open Fullscreen VR</a>
            </div>
        </div>
    </div>
</section>

<!-- Environment Selection -->
<section class="py-20 bg-surface">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-primary mb-4">Choose Your Environment</h2>
            <p class="text-xl text-text-secondary max-w-3xl mx-auto">
                Experience products in realistic settings tailored to your use case
            </p>
        </div>

        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
            <!-- Gaming Den -->
            <div class="card group cursor-pointer hover:scale-105 transition-all duration-300" onclick="selectEnvironment('gaming')">
                <div class="aspect-square bg-gradient-to-br from-accent-100 to-accent-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2926&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Gaming Den Environment" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg'; this.onerror=null;" />
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="absolute top-4 left-4 bg-accent text-white px-3 py-1 rounded-full text-sm font-semibold">
                        Most Popular
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-2">Gaming Den</h3>
                <p class="text-text-secondary mb-4">Immersive gaming setup with RGB lighting and premium audio</p>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-accent font-semibold">12 Products</span>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.9</span>
                    </div>
                </div>
            </div>

            <!-- Modern Living Room -->
            <div class="card group cursor-pointer hover:scale-105 transition-all duration-300" onclick="selectEnvironment('living')">
                <div class="aspect-square bg-gradient-to-br from-secondary-100 to-secondary-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Modern Living Room" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2926&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="absolute top-4 left-4 bg-success text-white px-3 py-1 rounded-full text-sm font-semibold">
                        Family Friendly
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-2">Modern Living Room</h3>
                <p class="text-text-secondary mb-4">Family entertainment and social VR experiences</p>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-accent font-semibold">8 Products</span>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.8</span>
                    </div>
                </div>
            </div>

            <!-- Professional Office -->
            <div class="card group cursor-pointer hover:scale-105 transition-all duration-300" onclick="selectEnvironment('office')">
                <div class="aspect-square bg-gradient-to-br from-warning-100 to-warning-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg" alt="Professional Office" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2926&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="absolute top-4 left-4 bg-secondary text-white px-3 py-1 rounded-full text-sm font-semibold">
                        Enterprise
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-2">Professional Office</h3>
                <p class="text-text-secondary mb-4">AR solutions for productivity and collaboration</p>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-accent font-semibold">15 Products</span>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.7</span>
                    </div>
                </div>
            </div>

            <!-- Creative Studio -->
            <div class="card group cursor-pointer hover:scale-105 transition-all duration-300" onclick="selectEnvironment('creative')">
                <div class="aspect-square bg-gradient-to-br from-success-100 to-success-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Creative Studio" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg'; this.onerror=null;" />
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-3">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </button>
                    </div>
                    <div class="absolute top-4 left-4 bg-warning text-white px-3 py-1 rounded-full text-sm font-semibold">
                        Creative Pro
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-2">Creative Studio</h3>
                <p class="text-text-secondary mb-4">3D design, art creation, and visualization tools</p>
                <div class="flex items-center justify-between">
                    <span class="text-sm text-accent font-semibold">10 Products</span>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.9</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Interactive Virtual Experience -->
<section class="py-20 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <!-- Virtual Environment Display -->
            <div class="relative">
                <div class="aspect-video bg-gradient-to-br from-primary-900 to-secondary-900 rounded-3xl overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1593508512255-86ab42a8e620?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Virtual Showroom Experience" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg'; this.onerror=null;" />

                    <!-- Interactive Hotspots -->
                    <div class="absolute top-1/4 left-1/3 w-4 h-4 bg-accent rounded-full animate-pulse cursor-pointer" onclick="showProductInfo('headset')">
                        <div class="absolute -top-2 -left-2 w-8 h-8 bg-accent/30 rounded-full animate-ping"></div>
                    </div>
                    <div class="absolute bottom-1/3 right-1/4 w-4 h-4 bg-secondary rounded-full animate-pulse cursor-pointer" onclick="showProductInfo('controllers')">
                        <div class="absolute -top-2 -left-2 w-8 h-8 bg-secondary/30 rounded-full animate-ping"></div>
                    </div>

                    <!-- Control Overlay -->
                    <div class="absolute bottom-4 left-4 right-4 bg-black/50 backdrop-blur-sm rounded-xl p-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                <button class="bg-white/20 text-white rounded-full p-2 hover:bg-white/30 transition-colors">
                                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                    </svg>
                                </button>
                                <span class="text-white text-sm">360° View Active</span>
                            </div>
                        <div class="flex items-center space-x-2">
                            <button id="btn-enter-vr" class="bg-accent text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-accent-600 transition-colors">
                                Enter VR Mode
                            </button>
                            <button id="btn-fullscreen" class="px-4 py-2 rounded-lg text-sm font-semibold border border-primary-200 hover:bg-surface transition-colors">
                                Full Screen
                            </button>
                        </div>
                        </div>
                    </div>
                </div>

                <!-- Environment Info -->
                <div class="absolute -bottom-6 left-6 right-6 bg-surface rounded-xl p-4 shadow-card border border-primary-100">
                    <div class="flex items-center justify-between">
                        <div>
                            <h4 class="font-semibold text-primary">Gaming Den Environment</h4>
                            <p class="text-sm text-text-secondary">Optimized for immersive gaming experiences</p>
                        </div>
                        <div class="flex items-center space-x-2">
                            <div class="w-2 h-2 bg-success rounded-full"></div>
                            <span class="text-sm text-success font-medium">Live</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Experience Controls -->
            <div>
                <h2 class="text-4xl font-bold text-primary mb-6">Interactive Experience</h2>
                <p class="text-lg text-text-secondary mb-8">
                    Navigate through realistic environments, interact with products, and experience features in context. Click on hotspots to learn more about each product.
                </p>

                <!-- Feature List -->
                <div class="space-y-4 mb-8">
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-accent rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">Virtual Product Handling</h4>
                            <p class="text-text-secondary text-sm">Pick up, rotate, and examine products in detail</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-secondary rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">Scale Comparisons</h4>
                            <p class="text-text-secondary text-sm">See how products fit in real-world spaces</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-success rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">Feature Demonstrations</h4>
                            <p class="text-text-secondary text-sm">Interactive demos of key product capabilities</p>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <button class="btn-primary" onclick="startGuidedTour()">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
                        </svg>
                        Start Guided Tour
                    </button>
                    <button class="btn-secondary" onclick="customizeEnvironment()">
                        Customize Environment
                    </button>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Guided Tours Section -->
<section class="py-20 bg-surface">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-primary mb-4">Guided Experience Tours</h2>
            <p class="text-xl text-text-secondary max-w-3xl mx-auto">
                Expert-curated journeys through different use cases and product configurations
            </p>
        </div>

        <div class="grid md:grid-cols-2 gap-8">
            <!-- Gaming Setup Tour -->
            <div class="card group">
                <div class="aspect-video bg-gradient-to-br from-accent-100 to-accent-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.pexels.com/photos/3761264/pexels-photo-3761264.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Gaming Setup Tour" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1593508512255-86ab42a8e620?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                    <div class="absolute top-4 left-4 bg-accent text-white px-3 py-1 rounded-full text-sm font-semibold">
                        15 min tour
                    </div>
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-4">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-3">Ultimate Gaming Setup</h3>
                <p class="text-text-secondary mb-4">
                    Explore high-performance VR gaming configurations with premium headsets, haptic feedback systems, and immersive audio solutions.
                </p>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center text-white text-xs font-bold mr-3">JM</div>
                        <div>
                            <p class="text-sm font-medium text-primary">Jake Miller</p>
                            <p class="text-xs text-text-secondary">Gaming Expert</p>
                        </div>
                    </div>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.9 (234)</span>
                    </div>
                </div>
                <button class="w-full btn-primary" onclick="startTour('gaming')">Start Gaming Tour</button>
            </div>

            <!-- Creative Professional Tour -->
            <div class="card group">
                <div class="aspect-video bg-gradient-to-br from-secondary-100 to-secondary-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1622979135225-d2ba269cf1ac?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Creative Professional Tour" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg'; this.onerror=null;" />
                    <div class="absolute top-4 left-4 bg-secondary text-white px-3 py-1 rounded-full text-sm font-semibold">
                        12 min tour
                    </div>
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-4">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-3">Creative Professional</h3>
                <p class="text-text-secondary mb-4">
                    Discover AR/VR tools for 3D modeling, architectural visualization, and digital art creation with precision tracking systems.
                </p>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-secondary rounded-full flex items-center justify-center text-white text-xs font-bold mr-3">SC</div>
                        <div>
                            <p class="text-sm font-medium text-primary">Sarah Chen</p>
                            <p class="text-xs text-text-secondary">3D Artist</p>
                        </div>
                    </div>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.8 (189)</span>
                    </div>
                </div>
                <button class="w-full btn-primary" onclick="startTour('creative')">Start Creative Tour</button>
            </div>

            <!-- Enterprise Training Tour -->
            <div class="card group">
                <div class="aspect-video bg-gradient-to-br from-warning-100 to-warning-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.pixabay.com/photo/2021/08/04/13/06/software-developer-6521720_1280.jpg" alt="Enterprise Training Tour" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2926&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                    <div class="absolute top-4 left-4 bg-warning text-white px-3 py-1 rounded-full text-sm font-semibold">
                        18 min tour
                    </div>
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-4">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-3">Enterprise Training</h3>
                <p class="text-text-secondary mb-4">
                    Experience enterprise-grade VR training solutions for safety protocols, skill development, and collaborative workspaces.
                </p>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-warning rounded-full flex items-center justify-center text-white text-xs font-bold mr-3">DR</div>
                        <div>
                            <p class="text-sm font-medium text-primary">David Rodriguez</p>
                            <p class="text-xs text-text-secondary">Training Specialist</p>
                        </div>
                    </div>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.7 (156)</span>
                    </div>
                </div>
                <button class="w-full btn-primary" onclick="startTour('enterprise')">Start Enterprise Tour</button>
            </div>

            <!-- Family Entertainment Tour -->
            <div class="card group">
                <div class="aspect-video bg-gradient-to-br from-success-100 to-success-200 rounded-xl mb-6 overflow-hidden relative">
                    <img src="https://images.pexels.com/photos/3183150/pexels-photo-3183150.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2" alt="Family Entertainment Tour" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" onerror="this.src='https://images.unsplash.com/photo-1560472354-b33ff0c44a43?q=80&w=2926&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D'; this.onerror=null;" />
                    <div class="absolute top-4 left-4 bg-success text-white px-3 py-1 rounded-full text-sm font-semibold">
                        10 min tour
                    </div>
                    <div class="absolute inset-0 bg-black/20 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300">
                        <button class="bg-white/90 text-primary rounded-full p-4">
                            <svg class="w-8 h-8" fill="currentColor" viewBox="0 0 24 24">
                                <path d="M8 5v14l11-7z"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <h3 class="text-xl font-bold text-primary mb-3">Family Entertainment</h3>
                <p class="text-text-secondary mb-4">
                    Explore family-friendly VR experiences with safety features, educational content, and multiplayer social activities.
                </p>
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center">
                        <div class="w-8 h-8 bg-success rounded-full flex items-center justify-center text-white text-xs font-bold mr-3">LT</div>
                        <div>
                            <p class="text-sm font-medium text-primary">Lisa Thompson</p>
                            <p class="text-xs text-text-secondary">Family Tech Expert</p>
                        </div>
                    </div>
                    <div class="flex items-center text-warning">
                        <svg class="w-4 h-4 fill-current" viewBox="0 0 24 24">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        <span class="text-sm ml-1">4.9 (298)</span>
                    </div>
                </div>
                <button class="w-full btn-primary" onclick="startTour('family')">Start Family Tour</button>
            </div>
        </div>
    </div>
</section>

<!-- Expert Consultation Booking -->
<section class="py-20 bg-gradient-to-br from-secondary-900 to-primary-900 text-white">
    <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
        <h2 class="text-4xl font-bold mb-6">Book Virtual Consultation</h2>
        <p class="text-xl text-secondary-200 mb-12">
            Get personalized guidance from our VR/AR experts in a virtual meeting space
        </p>

        <div class="bg-white/10 backdrop-blur-md rounded-2xl p-8 border border-white/20">
            <div class="grid md:grid-cols-3 gap-6 mb-8">
                <div class="text-center">
                    <div class="w-16 h-16 bg-accent rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Schedule Meeting</h3>
                    <p class="text-secondary-200 text-sm">Choose your preferred time slot</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-secondary rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Virtual Meeting</h3>
                    <p class="text-secondary-200 text-sm">Meet in our virtual showroom</p>
                </div>
                <div class="text-center">
                    <div class="w-16 h-16 bg-success rounded-full flex items-center justify-center mx-auto mb-4">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-lg font-semibold mb-2">Expert Guidance</h3>
                    <p class="text-secondary-200 text-sm">Get personalized recommendations</p>
                </div>
            </div>

            <!-- Available Time Slots -->
            <div class="mb-8">
                <h4 class="text-lg font-semibold mb-4">Available Today</h4>
                <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                    <button class="bg-white/20 hover:bg-accent text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        2:00 PM
                    </button>
                    <button class="bg-white/20 hover:bg-accent text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        3:30 PM
                    </button>
                    <button class="bg-white/20 hover:bg-accent text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        5:00 PM
                    </button>
                    <button class="bg-white/20 hover:bg-accent text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        7:30 PM
                    </button>
                </div>
            </div>

            <button class="btn-accent text-lg px-8 py-4" onclick="bookConsultation()">
                Book Free Consultation
                <svg class="w-5 h-5 ml-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>

            <p class="text-secondary-300 text-sm mt-4">
                30-minute sessions • No commitment required • Expert product recommendations
            </p>
        </div>
    </div>
</section>

<!-- Progress Tracking & Saved Configurations -->
<section class="py-20 bg-surface">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-primary mb-4">Your Virtual Journey</h2>
            <p class="text-xl text-text-secondary max-w-3xl mx-auto">
                Track your exploration progress and save favorite configurations for later
            </p>
        </div>

        <div class="grid lg:grid-cols-2 gap-12">
            <!-- Progress Tracking -->
            <div class="card">
                <h3 class="text-xl font-bold text-primary mb-6">Exploration Progress</h3>

                <div class="space-y-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-success rounded-full flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                                </svg>
                            </div>
                            <span class="text-primary font-medium">Gaming Den Environment</span>
                        </div>
                        <span class="text-sm text-success font-semibold">Completed</span>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-accent rounded-full flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                </svg>
                            </div>
                            <span class="text-primary font-medium">Professional Office</span>
                        </div>
                        <span class="text-sm text-accent font-semibold">In Progress</span>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-primary-300 rounded-full flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </div>
                            <span class="text-primary font-medium">Creative Studio</span>
                        </div>
                        <span class="text-sm text-text-secondary">Not Started</span>
                    </div>

                    <div class="flex items-center justify-between">
                        <div class="flex items-center">
                            <div class="w-8 h-8 bg-primary-300 rounded-full flex items-center justify-center mr-3">
                                <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                                </svg>
                            </div>
                            <span class="text-primary font-medium">Modern Living Room</span>
                        </div>
                        <span class="text-sm text-text-secondary">Not Started</span>
                    </div>
                </div>

                <div class="mt-6 pt-6 border-t border-primary-200">
                    <div class="flex items-center justify-between mb-2">
                        <span class="text-sm text-text-secondary">Overall Progress</span>
                        <span class="text-sm font-semibold text-primary">35%</span>
                    </div>
                    <div class="w-full bg-primary-200 rounded-full h-2">
                        <div class="bg-accent h-2 rounded-full" style="width: 35%"></div>
                    </div>
                </div>
            </div>

            <!-- Saved Configurations -->
            <div class="card">
                <div class="flex items-center justify-between mb-6">
                    <h3 class="text-xl font-bold text-primary">Saved Configurations</h3>
                    <button class="text-accent hover:text-accent-600 text-sm font-semibold">
                        View All
                    </button>
                </div>

                <div class="space-y-4">
                    <div class="bg-primary-50 rounded-lg p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h4 class="font-semibold text-primary">Ultimate Gaming Setup</h4>
                            <button class="text-text-secondary hover:text-accent">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                </svg>
                            </button>
                        </div>
                        <p class="text-sm text-text-secondary mb-3">Meta Quest 3 + Premium Audio + Haptic Suit</p>
                        <div class="flex items-center justify-between">
                            <span class="text-lg font-bold text-primary">$2,499</span>
                            <button class="bg-accent text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-accent-600 transition-colors">
                                Continue Setup
                            </button>
                        </div>
                    </div>

                    <div class="bg-primary-50 rounded-lg p-4">
                        <div class="flex items-start justify-between mb-2">
                            <h4 class="font-semibold text-primary">Creative Workspace</h4>
                            <button class="text-text-secondary hover:text-accent">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
                                </svg>
                            </button>
                        </div>
                        <p class="text-sm text-text-secondary mb-3">Apple Vision Pro + Precision Controllers</p>
                        <div class="flex items-center justify-between">
                            <span class="text-lg font-bold text-primary">$3,799</span>
                            <button class="bg-secondary text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-secondary-600 transition-colors">
                                Continue Setup
                            </button>
                        </div>
                    </div>
                </div>

                <button class="w-full mt-6 btn-secondary">
                    <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"/>
                    </svg>
                    Create New Configuration
                </button>
            </div>
        </div>
    </div>
</section>

<!-- Mobile AR Features -->
<section class="py-20 bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="text-center mb-16">
            <h2 class="text-4xl font-bold text-primary mb-4">Mobile AR Experience</h2>
            <p class="text-xl text-text-secondary max-w-3xl mx-auto">
                Use your smartphone camera for augmented reality product previews and virtual try-on experiences
            </p>
        </div>

        <div class="grid lg:grid-cols-2 gap-12 items-center">
            <!-- Mobile AR Demo -->
            <div class="relative">
                <div class="aspect-square bg-gradient-to-br from-primary-100 to-secondary-100 rounded-3xl overflow-hidden relative">
                    <img src="https://images.unsplash.com/photo-1606144042614-b2417e99c4e3?q=80&w=2940&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="Mobile AR Experience" class="w-full h-full object-cover" loading="lazy" onerror="this.src='https://images.pixabay.com/photo/2017/05/13/12/40/fashion-2309519_1280.jpg'; this.onerror=null;" />

                    <!-- AR Overlay Elements -->
                    <div class="absolute inset-0 flex items-center justify-center">
                        <div class="bg-white/90 backdrop-blur-sm rounded-xl p-4 shadow-card">
                            <div class="flex items-center space-x-3">
                                <div class="w-12 h-12 bg-accent rounded-full flex items-center justify-center">
                                    <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                                    </svg>
                                </div>
                                <div>
                                    <h4 class="font-semibold text-primary">AR Mode Active</h4>
                                    <p class="text-sm text-text-secondary">Point camera at surface</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- AR Instructions -->
                <div class="absolute -bottom-6 left-6 right-6 bg-surface rounded-xl p-4 shadow-card border border-primary-100">
                    <div class="flex items-center">
                        <div class="w-2 h-2 bg-success rounded-full animate-pulse mr-3"></div>
                        <span class="text-sm font-medium text-primary">Scanning environment...</span>
                    </div>
                </div>
            </div>

            <!-- AR Features -->
            <div>
                <h3 class="text-3xl font-bold text-primary mb-6">Try Before You Buy</h3>
                <p class="text-lg text-text-secondary mb-8">
                    Experience products in your actual space using your smartphone's camera. See how VR setups fit in your room and visualize scale accurately.
                </p>

                <!-- AR Feature List -->
                <div class="space-y-4 mb-8">
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-accent rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">Room Scale Visualization</h4>
                            <p class="text-text-secondary text-sm">See exactly how products fit in your space</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-secondary rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">360° Product Views</h4>
                            <p class="text-text-secondary text-sm">Examine products from every angle</p>
                        </div>
                    </div>
                    <div class="flex items-start">
                        <div class="w-6 h-6 bg-success rounded-full flex items-center justify-center mr-4 mt-1">
                            <svg class="w-3 h-3 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-primary mb-1">Interactive Demos</h4>
                            <p class="text-text-secondary text-sm">Test features and functionality virtually</p>
                        </div>
                    </div>
                </div>

                <!-- AR Action Buttons -->
                <div class="flex flex-col sm:flex-row gap-4">
                    <button class="btn-accent" onclick="startARMode()">
                        <svg class="w-5 h-5 inline mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
                        </svg>
                        Start AR Mode
                    </button>
                    <a href="product_categories" class="btn-secondary text-center">
                        Browse Products
                    </a>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Footer -->
<footer class="bg-primary-900 text-white py-16">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
            <!-- Company Info -->
            <div>
                <div class="flex items-center mb-6">
                    <a href="homepage" th:href="@{/homepage}" class="inline-flex items-center group">
                        <svg class="w-8 h-8 text-accent" viewBox="0 0 40 40" fill="currentColor"><path d="M20 4L36 12v16L20 36L4 28V12L20 4z"/><circle cx="20" cy="20" r="8" fill="white"/><circle cx="20" cy="20" r="4" fill="currentColor"/></svg>
                        <span class="ml-3 text-xl font-bold group-hover:text-accent transition-colors">Illusionix</span>
                    </a>
                </div>
                <p class="text-primary-300 mb-6">
                    The future of shopping, today. Experience products before you buy with cutting-edge AR/VR technology.
                </p>
                <div class="flex space-x-4">
                    <a href="javascript:void(0)" class="text-primary-400 hover:text-accent transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-primary-400 hover:text-accent transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z"/>
                        </svg>
                    </a>
                    <a href="javascript:void(0)" class="text-primary-400 hover:text-accent transition-colors">
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                        </svg>
                    </a>
                </div>
            </div>

            <!-- Products -->
            <div>
                <h3 class="text-lg font-semibold mb-6">Products</h3>
                <ul class="space-y-3">
                    <li><a href="product_categories" class="text-primary-300 hover:text-accent transition-colors">VR Headsets</a></li>
                    <li><a href="product_categories" class="text-primary-300 hover:text-accent transition-colors">AR Glasses</a></li>
                    <li><a href="product_categories" class="text-primary-300 hover:text-accent transition-colors">Accessories</a></li>
                    <li><a href="product_categories" class="text-primary-300 hover:text-accent transition-colors">Enterprise Solutions</a></li>
                </ul>
            </div>

            <!-- Support -->
            <div>
                <h3 class="text-lg font-semibold mb-6">Support</h3>
                <ul class="space-y-3">
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Setup Guides</a></li>
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Troubleshooting</a></li>
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Warranty</a></li>
                    <li><a href="contact" class="text-primary-300 hover:text-accent transition-colors">Contact Us</a></li>
                </ul>
            </div>

            <!-- Company -->
            <div>
                <h3 class="text-lg font-semibold mb-6">Company</h3>
                <ul class="space-y-3">
                    <li><a href="aboutus" class="text-primary-300 hover:text-accent transition-colors">About Us</a></li>
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Careers</a></li>
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Press</a></li>
                    <li><a href="javascript:void(0)" class="text-primary-300 hover:text-accent transition-colors">Partners</a></li>
                </ul>
            </div>
        </div>

        <div class="border-t border-primary-700 pt-8 flex flex-col md:flex-row justify-between items-center">
            <p class="text-primary-400 text-sm">
                © 2025 Illusionix. All Rights Reserved.
            </p>
            <div class="flex space-x-6 mt-4 md:mt-0">
                <a href="javascript:void(0)" class="text-primary-400 hover:text-accent text-sm transition-colors">Privacy Policy</a>
                <a href="javascript:void(0)" class="text-primary-400 hover:text-accent text-sm transition-colors">Terms of Service</a>
                <a href="javascript:void(0)" class="text-primary-400 hover:text-accent text-sm transition-colors">Cookie Policy</a>
            </div>
        </div>
    </div>
</footer>

<!-- Custom CSS for Theme Toggle -->
<style>
    .theme-toggle .theme-icon {
        transition: opacity 0.3s ease;
    }

    .theme-toggle .theme-icon.hidden {
        display: none !important;
    }

    .theme-toggle .theme-icon:not(.hidden) {
        display: inline-block !important;
    }
</style>

<!-- JavaScript for Interactive Features -->
<script>
    // Model-viewer error fallback for AR cards
    // Note: Avoid aggressive error replacement; let <model-viewer> handle retries.

    // Theme Toggle Functionality
    function initializeThemeToggle() {
        const themeToggle = document.querySelector('.theme-toggle');
        const moonIcon = document.querySelector('[data-icon="moon"]');
        const sunIcon = document.querySelector('[data-icon="sun"]');

        // Get current theme from localStorage or default to light
        const currentTheme = localStorage.getItem('illusionix-theme') || 'light';

        // Set initial state
        updateThemeIcons(currentTheme);

        // Add click event listener
        themeToggle?.addEventListener('click', function() {
            const root = document.documentElement;
            const isDark = root.classList.contains('theme-dark');
            const newTheme = isDark ? 'light' : 'dark';

            // Toggle theme class
            if (newTheme === 'dark') {
                root.classList.add('theme-dark');
            } else {
                root.classList.remove('theme-dark');
            }

            // Store theme preference
            localStorage.setItem('illusionix-theme', newTheme);

            // Update icons
            updateThemeIcons(newTheme);

            // Update button attributes
            this.setAttribute('aria-pressed', newTheme === 'dark' ? 'true' : 'false');
            this.setAttribute('title', newTheme === 'dark' ? 'Switch to light mode' : 'Switch to dark mode');
        });
    }

    function updateThemeIcons(theme) {
        const moonIcon = document.querySelector('[data-icon="moon"]');
        const sunIcon = document.querySelector('[data-icon="sun"]');

        if (theme === 'dark') {
            moonIcon?.classList.add('hidden');
            sunIcon?.classList.remove('hidden');
        } else {
            moonIcon?.classList.remove('hidden');
            sunIcon?.classList.add('hidden');
        }
    }

    // Mobile menu toggle
    document.getElementById('mobile-menu-btn')?.addEventListener('click', function() {
        document.getElementById('mobile-menu')?.classList.toggle('hidden');
    });

    // Search functionality
    document.addEventListener('DOMContentLoaded', function() {
        const searchToggle = document.getElementById('search-toggle');
        const searchExpanded = document.getElementById('search-expanded');
        const searchInput = document.getElementById('search-input');

        if (searchToggle && searchExpanded) {
            searchToggle.addEventListener('click', function() {
                const isExpanded = searchExpanded.classList.contains('scale-100');
                if (isExpanded) {
                    searchExpanded.classList.remove('scale-100');
                    searchExpanded.classList.add('scale-0');
                } else {
                    searchExpanded.classList.remove('scale-0');
                    searchExpanded.classList.add('scale-100');
                    searchInput.focus();
                }
            });

            // Close search when clicking outside
            document.addEventListener('click', function(event) {
                if (!searchToggle.contains(event.target) && !searchExpanded.contains(event.target)) {
                    searchExpanded.classList.remove('scale-100');
                    searchExpanded.classList.add('scale-0');
                }
            });
        }
    });

    // Live Chat functionality
    const chatToggle = document.getElementById('chat-toggle');
    const chatWindow = document.getElementById('chat-window');
    const chatClose = document.getElementById('chat-close');
    const chatInput = document.getElementById('chat-input');
    const chatSend = document.getElementById('chat-send');
    const chatMessages = document.getElementById('chat-messages');

    function toggleChat() {
        chatWindow.classList.toggle('scale-0');
    }

    chatToggle?.addEventListener('click', toggleChat);
    chatClose?.addEventListener('click', toggleChat);

    function sendMessage() {
        const message = chatInput.value.trim();
        if (message) {
            const userMsg = document.createElement('div');
            userMsg.className = 'mb-3 flex justify-end';
            userMsg.innerHTML = `
                <div class="bg-accent text-white p-3 rounded-lg max-w-xs">
                    <p class="text-sm">${message}</p>
                </div>
            `;
            chatMessages.appendChild(userMsg);
            chatInput.value = '';
            chatMessages.scrollTop = chatMessages.scrollHeight;

            setTimeout(() => {
                const agentMsg = document.createElement('div');
                agentMsg.className = 'mb-3';
                agentMsg.innerHTML = `
                    <div class="bg-primary-50 p-3 rounded-lg max-w-xs">
                        <p class="text-sm">Thank you for your message! Our team will get back to you soon. How else can I help you today?</p>
                        <span class="text-xs text-text-secondary">Support Agent • Online</span>
                    </div>
                `;
                chatMessages.appendChild(agentMsg);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }, 1500);
        }
    }

    chatSend?.addEventListener('click', sendMessage);
    chatInput?.addEventListener('keypress', function(e) {
        if (e.key === 'Enter') {
            sendMessage();
        }
    });

    // Environment Selection
    function selectEnvironment(environment) {
        console.log(`Selected environment: ${environment}`);
        // Add environment selection logic here
    }

    // Virtual Tour Functions
    function startVirtualTour() {
        // Navigate to dedicated VR experience page
        window.location.href = 'vr_experience';
    }

    function startGuidedTour() {
        console.log('Starting guided tour...');
        // Add guided tour logic
    }

    function startTour(tourType) {
        console.log(`Starting ${tourType} tour...`);
        // Add specific tour logic
    }

    // Product Information
    function showProductInfo(product) {
        console.log(`Showing info for: ${product}`);
        // Add product information display logic
    }

    // Consultation Booking
    function bookConsultation() {
        console.log('Booking consultation...');
        // Add consultation booking logic
    }

    // Environment Customization
    function customizeEnvironment() {
        console.log('Customizing environment...');
        // Add environment customization logic
    }

    // AR Mode
    function startARMode() {
        console.log('Starting AR mode...');
        // Add AR mode initialization logic
    }

    // Initialize theme toggle when DOM is loaded
    document.addEventListener('DOMContentLoaded', function() {
        initializeThemeToggle();
        // VR controls
        const scene = document.getElementById('vr-preview-scene');
        const wrap = document.getElementById('vr-preview-wrap');
        document.getElementById('btn-enter-vr')?.addEventListener('click', function(){
            if(scene && typeof scene.enterVR === 'function') { scene.enterVR(); }
            else if(wrap && wrap.requestFullscreen) { wrap.requestFullscreen(); }
        });
        document.getElementById('btn-fullscreen')?.addEventListener('click', function(){
            if(document.fullscreenElement){ document.exitFullscreen?.(); return; }
            if(wrap && wrap.requestFullscreen) wrap.requestFullscreen();
        });
        // AR buttons -> trigger model-viewer activateAR
        document.addEventListener('click', function(e){
            const btn = e.target.closest('[data-activate-ar]');
            if(!btn) return;
            const card = btn.closest('.border');
            const mv = card?.querySelector('model-viewer');
            if(mv && typeof mv.activateAR === 'function') mv.activateAR();
            else window.location.href = 'ar_tryon';
        });
    });
</script>
<script>
  // Sync DB cart on add-to-cart
  document.addEventListener('click', async function(e){
    const btn = e.target.closest('[data-add-to-cart]');
    if(!btn) return;
    const sku = String(btn.getAttribute('data-id')||'');
    const name = btn.getAttribute('data-name')||'';
    const price = String(btn.getAttribute('data-price')||'');
    const image = btn.getAttribute('data-image')||'';
    try{ await fetch('/cart/add',{method:'POST',headers:{'Content-Type':'application/x-www-form-urlencoded'},body:new URLSearchParams({sku,qty:'1',name,price,image})}); }catch(_){ }
  });
</script>
<!-- Inline cart fallback to ensure dynamic add/count works even without external JS -->
<script>
    (function(){
      const KEY='illusionix_cart';
      function read(){try{return JSON.parse(localStorage.getItem(KEY)||'{"items":[]}');}catch(_){return {items:[]};}}
      function write(c){try{localStorage.setItem(KEY, JSON.stringify(c));}catch(_){}}
      function total(){return read().items.reduce((s,it)=>s+(it.qty||0),0);}
      function updateBadges(){document.querySelectorAll('#cart-count,[data-cart-count]').forEach(el=>el.textContent=String(total()));}
      if(!('Cart' in window)){
        window.Cart={
          add({id,name,price,image,qty=1}){const c=read();const k=String(id);const ex=c.items.find(it=>String(it.id)===k);if(ex){ex.qty+=qty;}else{c.items.push({id:k,name,price:Number(price||0),image:image||'',qty});}write(c);updateBadges();return c;},
          get(){return read();},clear(){write({items:[]});updateBadges();}
        };
      }
      document.addEventListener('click',function(e){const btn=e.target.closest('[data-add-to-cart]');if(!btn)return;Cart.add({id:btn.getAttribute('data-id'),name:btn.getAttribute('data-name'),price:Number(btn.getAttribute('data-price')||0),image:btn.getAttribute('data-image')||'',qty:1});btn.classList.add('ring-2','ring-accent');setTimeout(()=>btn.classList.remove('ring-2','ring-accent'),400);});
      if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',updateBadges);}else{updateBadges();}
    })();
</script>
<script>
    // Inline Theme/UI fallbacks (auth removed)
    (function(){
      if(!window.__themeInlineLoaded){window.__themeInlineLoaded=true;const STORAGE_KEY='illusionix-theme',CLASS_DARK='theme-dark';function apply(t){const r=document.documentElement; t==='dark'?r.classList.add(CLASS_DARK):r.classList.remove(CLASS_DARK);}function get(){try{return localStorage.getItem(STORAGE_KEY);}catch(_){return null}}function set(t){try{localStorage.setItem(STORAGE_KEY,t);}catch(_){}}const init=get()||'light';apply(init);function cur(){return document.documentElement.classList.contains(CLASS_DARK)?'dark':'light'}function sync(t){document.querySelectorAll('.theme-toggle [data-icon="sun"]').forEach(el=>el.style.display=t==='dark'?'inline-block':'none');document.querySelectorAll('.theme-toggle [data-icon="moon"]').forEach(el=>el.style.display=t==='dark'?'none':'inline-block');document.querySelectorAll('.theme-toggle').forEach(b=>{b.setAttribute('aria-pressed',t==='dark'?'true':'false');b.setAttribute('title',t==='dark'?'Switch to light mode':'Switch to dark mode')});}function toggle(){const n=cur()==='dark'?'light':'dark';apply(n);set(n);sync(n)}function bind(){document.querySelectorAll('.theme-toggle').forEach(b=>b.addEventListener('click',toggle));sync(cur())}if(document.readyState==='loading')document.addEventListener('DOMContentLoaded',bind);else bind();}
      if(!window.__uiInlineLoaded){window.__uiInlineLoaded=true;function ST(e){e.preventDefault();const f=document.querySelector('footer');if(f)f.scrollIntoView({behavior:'smooth',block:'start'});else window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'})}document.querySelectorAll('a[href="#site-footer"]').forEach(a=>a.addEventListener('click',ST));if(!document.getElementById('btn-ripple-style')){const s=document.createElement('style');s.id='btn-ripple-style';s.textContent='.btn-ripple{position:relative;overflow:hidden}.btn-ripple .ripple{position:absolute;border-radius:50%;transform:scale(0);animation:ripple 600ms linear;background:currentColor;opacity:.2}@keyframes ripple{to{transform:scale(4);opacity:0}}';document.head.appendChild(s)}document.querySelectorAll('.btn-accent,.btn-secondary,button,a.btn').forEach(b=>{b.classList.add('btn-ripple');b.addEventListener('click',function(e){const r=this.getBoundingClientRect();const el=document.createElement('span');const size=Math.max(r.width,r.height);el.className='ripple';el.style.width=el.style.height=size+'px';el.style.left=(e.clientX-r.left-size/2)+'px';el.style.top=(e.clientY-r.top-size/2)+'px';this.appendChild(el);setTimeout(()=>el.remove(),650)})})}
    })();
</script>
<script id="dhws-dataInjector" src="../public/dhws-data-injector.js"></script>
</body>
</html>
