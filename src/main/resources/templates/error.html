<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Error - Illusionix</title>
  <link rel="stylesheet" th:href="@{/main.css}" />
</head>
<body class="bg-background text-text-primary">
<header class="bg-surface/80 backdrop-blur-md border-b border-primary-200 sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <a href="homepage" th:href="@{/homepage}" class="flex items-center">
        <img th:if="${brandLogoUrl}" th:src="${brandLogoUrl}" alt="Illusionix" class="h-8 w-auto" />
        <svg th:if="${brandLogoUrl} == null" class="w-8 h-8 text-secondary" viewBox="0 0 40 40" fill="currentColor"><path d="M20 4L36 12v16L20 36L4 28V12L20 4z"/></svg>
        <span class="ml-2 text-lg font-bold text-primary">Illusionix</span>
      </a>
      <div class="flex items-center space-x-2" th:if="${loggedIn == null or loggedIn == false}">
        <a href="/" th:href="@{/}" class="btn-accent text-sm px-4 py-2">Go Home</a>
        <a href="login" th:href="@{/login}" class="btn-secondary text-sm px-4 py-2">Login</a>
      </div>
      <div class="flex items-center space-x-3" th:if="${loggedIn == true}">
        <span class="text-sm text-text-secondary">Hi, <span class="text-primary font-semibold" th:text="${currentUserName}">User</span></span>
        <a href="/" th:href="@{/}" class="btn-accent text-sm px-4 py-2">Home</a>
        <a href="logout" th:href="@{/logout}" class="btn-secondary text-sm px-4 py-2">Logout</a>
      </div>
    </div>
  </nav>
</header>

<main class="py-20">
  <div class="max-w-3xl mx-auto px-4 text-center">
    <h1 class="text-4xl font-bold text-primary mb-3">Something went wrong</h1>
    <p class="text-text-secondary mb-6">An unexpected error occurred. Please try again, or contact support.</p>
    <div class="flex items-center justify-center gap-3">
      <a href="/" th:href="@{/}" class="btn-accent">Go to Homepage</a>
      <a href="/contact" th:href="@{/contact}" class="btn-secondary">Contact Support</a>
    </div>
    <div class="mt-8 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3 text-left">
      <a th:href="@{/product_categories}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">Browse Products</a>
      <a th:href="@{/virtual_showroom}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">Virtual Showroom</a>
      <a th:href="@{/shopping_cart_checkout}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">My Cart</a>
      <a th:if="${loggedIn}" th:href="@{/user_dashboard}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">My Dashboard</a>
      <a th:if="${isAdmin}" th:href="@{/admin_dashboard}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">Admin Dashboard</a>
      <a th:href="@{/aboutus}" class="p-3 rounded-lg border border-primary-200 hover:bg-primary-50 transition">About Illusionix</a>
    </div>
    <div class="mt-6 text-sm text-text-secondary" th:if="${supportEmail}">
      Need help? <a th:href="${'mailto:' + supportEmail}" class="text-secondary hover:underline" th:text="${supportEmail}">support@example.com</a>
    </div>
    <p class="text-xs text-text-secondary mt-4" th:if="${traceId}">Trace ID: <span th:text="${traceId}">abc123</span></p>
  </div>
  </main>
<div th:replace="fragments/cart-utils :: cartScripts"></div>
</body>
</html>
